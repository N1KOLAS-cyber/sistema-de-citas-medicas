# üìö Documentaci√≥n Completa - Sistema NERV

## üéØ Sistema de Citas M√©dicas NERV

> Aplicaci√≥n m√≥vil multiplataforma para la gesti√≥n eficiente de citas m√©dicas entre pacientes y profesionales de la salud.

![NERV Logo](assets/images/logo.jpeg)

---

## üöÄ ¬°NUEVO! Integraci√≥n Completa de Colecciones

**Las 3 colecciones de Firestore est√°n 100% integradas y funcionando:**
- ‚úÖ `usuarios` - Gesti√≥n completa de usuarios
- ‚úÖ `citas` - Sistema de citas m√©dicas
- ‚úÖ `disponibilidad_medicos` - Horarios de doctores

---

## üìã Tabla de Contenidos

- [Instalaci√≥n R√°pida](#-instalaci√≥n-r√°pida)
- [Descripci√≥n General](#descripci√≥n-general)
- [Caracter√≠sticas](#caracter√≠sticas)
- [Tecnolog√≠as](#tecnolog√≠as)
- [Estructura del Proyecto](#estructura-del-proyecto)
- [Configuraci√≥n](#configuraci√≥n)
- [Colecciones de Firestore](#-colecciones-de-firestore)
- [Nuevas Funcionalidades](#-nuevas-funcionalidades-implementadas)
- [Gu√≠a de Pruebas](#-gu√≠a-de-pruebas-r√°pidas)
- [Troubleshooting](#-soluci√≥n-de-problemas)
- [Comandos √ötiles](#-comandos-√∫tiles)

---

## üéØ Instalaci√≥n R√°pida

**¬øQuieres el sistema funcionando en 10 minutos?**

### Paso 1: Configurar Firestore (CR√çTICO)
1. Ve a [Firebase Console](https://console.firebase.google.com)
2. Tu proyecto ‚Üí Firestore Database ‚Üí Rules
3. Copia las reglas de la secci√≥n [Reglas de Firestore](#-reglas-de-firestore)
4. Publicar

### Paso 2: Ejecutar
```bash
flutter run
```

### Paso 3: Probar
- Sigue la [Gu√≠a de Pruebas](#-gu√≠a-de-pruebas-r√°pidas)

---

## Descripci√≥n General

**NERV** es un sistema integral de gesti√≥n de citas m√©dicas desarrollado como proyecto acad√©mico del cuarto cuatrimestre. La aplicaci√≥n permite a pacientes agendar citas con doctores especializados, gestionar su historial m√©dico y facilitar la comunicaci√≥n entre profesionales de la salud y pacientes.

Desarrollado con Flutter para garantizar compatibilidad multiplataforma (Android, iOS, Web, Desktop) y Firebase como backend para autenticaci√≥n en tiempo real y almacenamiento de datos en la nube.

### Objetivos del Proyecto

- ‚úÖ Implementar arquitectura limpia y escalable
- ‚úÖ Integrar servicios de Firebase (Authentication, Firestore)
- ‚úÖ Dise√±ar interfaces de usuario centradas en la experiencia del usuario
- ‚úÖ Desarrollar aplicaci√≥n multiplataforma con una √∫nica base de c√≥digo
- ‚úÖ Aplicar principios de desarrollo m√≥vil moderno
- ‚úÖ **Sistema completo de gesti√≥n de citas m√©dicas en tiempo real**

---

## Caracter√≠sticas

### M√≥dulo de Pacientes

| Funcionalidad | Descripci√≥n | Estado |
|--------------|-------------|--------|
| Registro de Usuario | Crear cuenta con validaci√≥n de datos | Implementado |
| Autenticaci√≥n | Login con email/password y login an√≥nimo | Implementado |
| B√∫squeda de Doctores | Filtrar por especialidad y b√∫squeda por nombre | Implementado |
| Visualizaci√≥n de Citas | Ver historial y citas programadas | Implementado |
| Gesti√≥n de Perfil | Actualizar informaci√≥n personal | Implementado |
| Agendamiento de Citas | Reservar citas con doctores | Implementado |

### M√≥dulo de Doctores

| Funcionalidad | Descripci√≥n | Estado |
|--------------|-------------|--------|
| Registro Profesional | Registro con especialidad y licencia m√©dica | Implementado |
| Panel de Control | Dashboard con estad√≠sticas y m√©tricas | Implementado |
| Gesti√≥n de Citas | Ver y administrar citas programadas | Implementado |
| Perfil Profesional | Informaci√≥n m√©dica y credenciales | Implementado |
| Gesti√≥n de Horarios | Crear y administrar disponibilidad | Implementado |

### M√≥dulo de Administraci√≥n

| Funcionalidad | Descripci√≥n | Estado |
|--------------|-------------|--------|
| Acceso R√°pido | Login directo con credenciales predefinidas | Implementado |
| Gesti√≥n de Usuarios | Administrar pacientes y doctores | Implementado |
| Herramientas Admin | Crear horarios masivos y utilidades | Implementado |

---

## Tecnolog√≠as

### Stack Tecnol√≥gico

```yaml
Frontend Framework: Flutter 3.9.2+
Lenguaje: Dart
Backend as a Service: Firebase
  - Firebase Authentication
  - Cloud Firestore
Gesti√≥n de Estado: Provider 6.1.2
Dise√±o UI/UX: Material Design 3
```

### Dependencias Principales

| Paquete | Versi√≥n | Prop√≥sito |
|---------|---------|-----------|
| `firebase_core` | ^2.32.0 | Configuraci√≥n de Firebase |
| `firebase_auth` | ^4.20.0 | Autenticaci√≥n de usuarios |
| `cloud_firestore` | ^4.17.5 | Base de datos en tiempo real |
| `provider` | ^6.1.2 | Gesti√≥n de estado |
| `intl` | ^0.19.0 | Internacionalizaci√≥n y formato de fechas |
| `http` | ^1.2.2 | Peticiones HTTP |

---

## Estructura del Proyecto

```
sistema_citas_medicas/
‚îÇ
‚îú‚îÄ‚îÄ android/                    # Configuraci√≥n Android
‚îú‚îÄ‚îÄ ios/                        # Configuraci√≥n iOS
‚îú‚îÄ‚îÄ web/                        # Configuraci√≥n Web
‚îú‚îÄ‚îÄ windows/                    # Configuraci√≥n Windows
‚îú‚îÄ‚îÄ linux/                      # Configuraci√≥n Linux
‚îú‚îÄ‚îÄ macos/                      # Configuraci√≥n macOS
‚îÇ
‚îú‚îÄ‚îÄ assets/                     # Recursos est√°ticos
‚îÇ   ‚îî‚îÄ‚îÄ images/
‚îÇ       ‚îî‚îÄ‚îÄ logo.jpeg          # Logo de la aplicaci√≥n
‚îÇ
‚îú‚îÄ‚îÄ lib/                        # C√≥digo fuente principal
‚îÇ   ‚îú‚îÄ‚îÄ constants/             # Constantes de la aplicaci√≥n
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app_constants.dart
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ models/                # Modelos de datos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user_model.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ appointment_model.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ doctor_availability_model.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ specialty_model.dart
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/              # Servicios y l√≥gica de negocio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin_service.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ firestore_service.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bulk_availability_service.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migration_service.dart
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ tabs/                  # Pantallas de la aplicaci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ simple_login_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ register_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ forgot_password_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ appointments_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ doctors_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edit_profile_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ doctor_availability_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create_appointment_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ messages_page.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ privacy_terms_page.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin_tools_page.dart
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ utils/                 # Utilidades
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ date_utils.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ integration_helper.dart
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ firebase_options.dart  # Configuraci√≥n Firebase
‚îÇ   ‚îî‚îÄ‚îÄ main.dart             # Punto de entrada
‚îÇ
‚îú‚îÄ‚îÄ pubspec.yaml               # Dependencias del proyecto
‚îú‚îÄ‚îÄ README.md                  # Este archivo
‚îî‚îÄ‚îÄ firebase.json              # Configuraci√≥n de Firebase
```

---

## Configuraci√≥n

### Configuraci√≥n de Firebase

#### 1. Crear Proyecto en Firebase

1. Acceder a [Firebase Console](https://console.firebase.google.com/)
2. Crear nuevo proyecto llamado "sistema-citas-medicas"
3. Habilitar Google Analytics (opcional)

#### 2. Habilitar Servicios

**Authentication:**
1. Ir a Authentication > Sign-in method
2. Habilitar "Email/Password"
3. Habilitar "Anonymous" (opcional)

**Firestore Database:**
1. Ir a Firestore Database
2. Crear base de datos en modo "production"
3. Configurar reglas de seguridad (ver secci√≥n siguiente)

#### 3. Configurar Flutter con Firebase

El proyecto ya incluye `firebase_options.dart` con las configuraciones necesarias para:
- Android
- iOS
- Web
- Windows
- macOS

**Proyecto Firebase:** `doctor-appoitment-4b`

---

## üî• Colecciones de Firestore

### 1. Colecci√≥n de Usuarios (`usuarios`)

Esta colecci√≥n almacena la informaci√≥n personal de cada usuario (pacientes y doctores).

#### Estructura del Documento

```dart
{
  "id": "userId_abc123",                    // UID de Firebase Auth
  "email": "usuario@ejemplo.com",           // Email del usuario
  "name": "Juan P√©rez",                     // Nombre completo
  "phone": "+34 123 456 789",              // Tel√©fono
  "profileImage": "https://...",            // URL de imagen de perfil (opcional)
  "createdAt": 1697875200000,              // Timestamp de creaci√≥n
  "updatedAt": 1697875200000,              // Timestamp de √∫ltima actualizaci√≥n
  "isDoctor": false,                        // Si es doctor o paciente
  "age": 25,                               // Edad del usuario
  "birthplace": "Ciudad de M√©xico",        // Lugar de nacimiento
  
  // Campos espec√≠ficos para pacientes:
  "medicalHistory": "Alergia a penicilina...", // Historial m√©dico/enfermedades
  
  // Campos espec√≠ficos para doctores:
  "specialty": "Cardiolog√≠a",               // Especialidad m√©dica
  "licenseNumber": "MED-12345",            // N√∫mero de licencia
  "rating": 4.5,                           // Calificaci√≥n promedio
  "totalAppointments": 150                  // Total de citas atendidas
}
```

### 2. Colecci√≥n de Citas (`citas`)

Esta colecci√≥n guarda todas las citas programadas en la aplicaci√≥n.

#### Estructura del Documento

```dart
{
  "id": "appointment_xyz789",              // ID √∫nico de la cita
  "patientId": "userId_abc123",           // ID del paciente
  "doctorId": "doctorId_def456",          // ID del m√©dico
  "patientName": "Juan P√©rez",            // Nombre del paciente
  "doctorName": "Dr. Mar√≠a Garc√≠a",       // Nombre del doctor
  "specialty": "Cardiolog√≠a",             // Especialidad
  "appointmentDate": 1697875200000,       // Fecha y hora de la cita (timestamp)
  "timeSlot": "09:00 - 10:00",           // Franja horaria
  "status": "pending",                     // Estado: pending, confirmed, completed, cancelled
  "type": "consultation",                  // Tipo: consultation, followUp, emergency, routine
  "notes": "Primera consulta...",         // Notas adicionales (opcional)
  "symptoms": "Dolor de pecho...",        // S√≠ntomas reportados (opcional)
  "diagnosis": "...",                      // Diagn√≥stico (opcional)
  "prescription": "...",                   // Receta m√©dica (opcional)
  "cost": 50.00,                          // Costo de la consulta (opcional)
  "createdAt": 1697875200000,             // Timestamp de creaci√≥n
  "updatedAt": 1697875200000              // Timestamp de √∫ltima actualizaci√≥n
}
```

### 3. Colecci√≥n de Disponibilidad de M√©dicos (`disponibilidad_medicos`)

Esta colecci√≥n es vital para la l√≥gica de validaci√≥n de la agenda. Almacena los horarios disponibles de cada m√©dico.

#### Estructura del Documento

```dart
{
  "id": "availability_123",                // ID √∫nico del horario
  "doctorId": "doctorId_def456",          // ID del m√©dico
  "doctorName": "Dr. Mar√≠a Garc√≠a",       // Nombre del doctor
  "date": 1697875200000,                  // Fecha del horario (timestamp)
  "timeSlot": "09:00 - 10:00",           // Franja horaria formateada
  "startTime": 1697875200000,             // Hora de inicio (timestamp)
  "endTime": 1697878800000,               // Hora de fin (timestamp)
  "isAvailable": true,                     // Si el horario est√° disponible
  "appointmentId": null,                   // ID de la cita si est√° ocupado (opcional)
  "createdAt": 1697875200000,             // Timestamp de creaci√≥n
  "updatedAt": 1697875200000              // Timestamp de √∫ltima actualizaci√≥n
}
```

---

## üîê Reglas de Firestore

**IMPORTANTE**: Configura estas reglas en Firebase Console para proteger tus datos:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Colecci√≥n de usuarios
    match /usuarios/{userId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Colecci√≥n de citas
    match /citas/{appointmentId} {
      allow read: if request.auth != null && 
        (resource.data.patientId == request.auth.uid || 
         resource.data.doctorId == request.auth.uid);
      
      allow create: if request.auth != null && 
        request.resource.data.patientId == request.auth.uid;
      
      allow update: if request.auth != null && 
        (resource.data.patientId == request.auth.uid || 
         resource.data.doctorId == request.auth.uid);
      
      allow delete: if request.auth != null && 
        resource.data.patientId == request.auth.uid;
    }
    
    // Colecci√≥n de disponibilidad de m√©dicos
    match /disponibilidad_medicos/{availabilityId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && 
        request.resource.data.doctorId == request.auth.uid;
    }
  }
}
```

### C√≥mo Aplicar las Reglas:

1. Abre [Firebase Console](https://console.firebase.google.com)
2. Selecciona tu proyecto
3. Ve a **Firestore Database** > **Rules**
4. Copia y pega las reglas de arriba
5. Haz clic en **Publicar**

---

## ‚ú® Nuevas Funcionalidades Implementadas

### 1Ô∏è‚É£ Widget de Consejos M√©dicos üåÆüê∏

**Ubicaci√≥n:** Dashboard (Inicio)  
**Color:** Verde agua/teal

Al hacer clic, se abre un di√°logo con consejos divertidos:

**Consejos incluidos:**
- üåÆ "Si comiste tacos de la esquina y te cayeron mal" ‚Üí M√©dico General
- üê∏ "Si te bes√≥ el sapo y ahora tienes calentura" ‚Üí M√©dico General
- ‚ù§Ô∏è "Si sientes que tu coraz√≥n late diferente" ‚Üí Cardi√≥logo
- üë∂ "Si tu beb√© tiene fiebre o malestar" ‚Üí Pediatra
- üëÅÔ∏è "Si ves borroso o te duelen los ojos" ‚Üí Oftalm√≥logo
- ü¶¥ "Si te duelen los huesos o articulaciones" ‚Üí Ortopedista

### 2Ô∏è‚É£ Chat Widget Flotante üí¨

**Ubicaci√≥n:** Bot√≥n flotante en "Mis Citas"  
**Funcionalidad:** Widget flotante sin funcionalidad real (solo visual)

- üñ§ Fondo semi-transparente (overlay)
- üì± Tama√±o fijo: 400x600px m√°ximo
- üé® Bordes redondeados y sombra elegante
- ‚ùå Bot√≥n X para cerrar

### 3Ô∏è‚É£ Formulario de Perfil Completo üìù

**Campos Nuevos Agregados:**
- ‚úÖ **Edad** (campo num√©rico)
- ‚úÖ **Lugar de Nacimiento** (texto)

**Campos Existentes:**
- Nombre, Tel√©fono, Edad, Lugar de Nacimiento
- Historial M√©dico (solo pacientes)
- Especialidad (solo doctores)
- N√∫mero de Licencia (solo doctores)

### 4Ô∏è‚É£ Pantalla de Privacidad y T√©rminos üìú

**Ubicaci√≥n:** Perfil ‚Üí "Privacidad y T√©rminos"

**Contenido:**
1. **Introducci√≥n** - Aceptaci√≥n de t√©rminos
2. **Recopilaci√≥n de Datos** - Qu√© datos se recopilan
3. **Uso Privado** - C√≥mo se usan los datos
4. **Fundamento Legal** - Leyes mexicanas aplicables:
   - LFPDPPP (Ley Federal de Protecci√≥n de Datos)
   - Art√≠culo 6¬∞ - Principios
   - Art√≠culo 8¬∞ - Consentimiento
   - Art√≠culo 16¬∞ - Derechos ARCO
   - Ley General de Salud - Art√≠culo 100 Bis
   - NOM-024-SSA3-2012
5. **Derechos ARCO** - Derechos del usuario
6. **Medidas de Seguridad** - Protecci√≥n implementada
7. **Datos Sensibles** - Manejo de informaci√≥n m√©dica
8. **Conservaci√≥n** - Tiempo de almacenamiento
9. **Contacto** - Informaci√≥n de contacto

### 5Ô∏è‚É£ Filtros Simplificados en Citas üìÖ

**Antes:** Todas, Pendientes, Confirmadas, Completadas, Canceladas (5 opciones)  
**Ahora:** 
- **Todas** - Todas las citas
- **Pr√≥ximas** - Solo citas futuras (pendientes/confirmadas) ‚≠ê Por defecto
- **Canceladas** - Solo canceladas

### 6Ô∏è‚É£ Bot√≥n "Agendar Cita" Mejorado

**En Lista de Doctores:**
- ‚úÖ Ahora muestra **indicador de carga** (spinner)
- ‚úÖ Carga tus datos autom√°ticamente
- ‚úÖ Te lleva con el **doctor ya seleccionado**
- ‚úÖ Empiezas en **Paso 2** (fecha)

---

## üß™ Gu√≠a de Pruebas R√°pidas

### ‚ö° Verificaci√≥n Express (5 minutos)

#### 1Ô∏è‚É£ Configurar Reglas de Firestore (2 min)

**CR√çTICO:** Sin esto NO funcionar√° nada.

1. Ve a: https://console.firebase.google.com
2. Tu proyecto ‚Üí Firestore Database ‚Üí Rules
3. Copia las reglas de la secci√≥n [Reglas de Firestore](#-reglas-de-firestore)
4. **Publicar**

‚úÖ Hecho cuando veas "Publicadas" en verde

#### 2Ô∏è‚É£ Ejecutar la App (1 min)

```bash
flutter run
```

#### 3Ô∏è‚É£ Prueba R√°pida de Usuario (2 min)

1. **Registra un Doctor:**
   ```
   Nombre: Test Doctor
   Email: test.doctor@demo.com
   Tel√©fono: 123456789
   Contrase√±a: test123
   ‚úÖ Marcar "Soy doctor"
   Especialidad: Cardiolog√≠a
   Licencia: TEST-001
   ```

2. **Como Doctor ‚Üí Gestionar Horarios:**
   - Fecha: Ma√±ana
   - Crear Horarios (9am-5pm)

3. **Cierra sesi√≥n**

4. **Registra un Paciente:**
   ```
   Nombre: Test Paciente
   Email: test.paciente@demo.com
   Tel√©fono: 987654321
   Contrase√±a: test123
   ‚ùå NO marcar "Soy doctor"
   ```

5. **Como Paciente ‚Üí Agendar Cita:**
   - Selecciona: Test Doctor
   - Fecha: Ma√±ana (misma que los horarios)
   - Horario: Cualquiera disponible
   - S√≠ntomas: "Prueba del sistema"
   - **Confirmar**

6. **¬øVes "¬°Cita Creada!"?**
   - ‚úÖ S√ç ‚Üí ¬°Todo funciona!
   - ‚ùå NO ‚Üí Ve a [Soluci√≥n de Problemas](#-soluci√≥n-de-problemas)

### üîç Verificar en Firebase Console

1. Ve a: https://console.firebase.google.com
2. Tu proyecto ‚Üí Firestore Database

**Deber√≠as ver 3 colecciones:**

#### üìÅ usuarios
```
2 documentos:
- test.doctor@demo.com (isDoctor: true)
- test.paciente@demo.com (isDoctor: false)
```

#### üìÅ disponibilidad_medicos
```
8 documentos (horarios de 9am a 5pm)
Uno debe tener:
- isAvailable: false
- appointmentId: [ID de tu cita]
```

#### üìÅ citas
```
1 documento:
- patientName: Test Paciente
- doctorName: Test Doctor
- status: pending
- symptoms: Prueba del sistema
```

### ‚úÖ Lista de Verificaci√≥n R√°pida

- [ ] Reglas de Firestore publicadas
- [ ] App ejecut√°ndose sin errores
- [ ] Doctor registrado
- [ ] Horarios creados
- [ ] Paciente registrado
- [ ] Cita creada exitosamente
- [ ] Verificado en Firebase Console

**¬øTodos marcados?** ‚Üí ‚úÖ **¬°INTEGRACI√ìN COMPLETA EXITOSA!** üéâ

---

## üêõ Soluci√≥n de Problemas

### No veo horarios disponibles
```
1. Verifica fecha: ¬øEs la misma donde el doctor cre√≥ horarios?
2. Firebase Console ‚Üí disponibilidad_medicos
3. ¬øExisten documentos para esa fecha?
4. ¬øisAvailable es true?
```

### Error al crear cita
```
1. ¬øConfiguraste las reglas de Firestore?
2. ¬øHay conexi√≥n a internet?
3. Revisa la consola: flutter logs
```

### No aparecen datos
```
1. Cierra sesi√≥n y vuelve a iniciar
2. Verifica en Firebase Console que los datos existen
3. Revisa las reglas de Firestore
```

### "Missing or insufficient permissions"
**Soluci√≥n**: Aseg√∫rate de haber configurado las reglas de Firestore correctamente.

### "Index not found"
**Soluci√≥n**: Firestore te dar√° un enlace para crear el √≠ndice necesario. Haz clic en el enlace y espera a que se cree el √≠ndice.

### Los cambios no se reflejan en tiempo real
**Soluci√≥n**: Verifica que est√©s usando `StreamBuilder` en lugar de `FutureBuilder` para datos en tiempo real.

### No puedo crear citas
**Soluci√≥n**: 
1. Verifica que el doctor tenga horarios disponibles creados
2. Aseg√∫rate de que la fecha seleccionada sea futura
3. Revisa que el usuario est√© autenticado correctamente

---

## üîß Comandos √ötiles

### Desarrollo

```bash
# Ejecutar en modo desarrollo
flutter run

# Ejecutar en web
flutter run -d chrome

# Hot reload (en app en ejecuci√≥n)
r

# Hot restart (en app en ejecuci√≥n)
R

# Analizar c√≥digo
flutter analyze

# Formatear c√≥digo
flutter format .

# Limpiar build
flutter clean
```

### Testing

```bash
# Ejecutar tests
flutter test

# Ejecutar tests con coverage
flutter test --coverage

# Ver coverage
genhtml coverage/lcov.info -o coverage/html
```

### Build

```bash
# Build para Android
flutter build apk

# Build para iOS
flutter build ios

# Build para Web
flutter build web

# Build para Windows
flutter build windows
```

### Logs y Debugging

```bash
# Ver logs en tiempo real
flutter logs

# Ver errores espec√≠ficos
flutter run --verbose

# Limpiar cach√©
flutter clean
flutter pub get
```

---

## üìä Modelos de Datos

### UserModel

```dart
{
  id: String,
  email: String,
  name: String,
  phone: String,
  profileImage: String?,
  createdAt: DateTime,
  updatedAt: DateTime,
  isDoctor: bool,
  specialty: String?,        // Solo doctores
  licenseNumber: String?,    // Solo doctores
  rating: double?,           // Solo doctores
  totalAppointments: int?,   // Solo doctores
  medicalHistory: String?,   // Solo pacientes
  age: int?,                 // Edad del usuario
  birthplace: String?        // Lugar de nacimiento
}
```

### AppointmentModel

```dart
{
  id: String,
  patientId: String,
  doctorId: String,
  patientName: String,
  doctorName: String,
  specialty: String,
  appointmentDate: DateTime,
  timeSlot: String,
  status: AppointmentStatus,
  type: AppointmentType,
  notes: String?,
  symptoms: String?,
  diagnosis: String?,
  prescription: String?,
  cost: double?,
  createdAt: DateTime,
  updatedAt: DateTime
}
```

### Enumeraciones

**AppointmentStatus:**
- `pending` - Cita pendiente de confirmaci√≥n
- `confirmed` - Cita confirmada
- `completed` - Cita completada
- `cancelled` - Cita cancelada

**AppointmentType:**
- `consultation` - Consulta general
- `followUp` - Seguimiento
- `emergency` - Emergencia
- `routine` - Revisi√≥n rutinaria

---

## üé® Especialidades M√©dicas

El sistema soporta las siguientes especialidades m√©dicas:

| Especialidad | Precio Base | Duraci√≥n Promedio |
|--------------|-------------|-------------------|
| Medicina General | $50.00 | 30 minutos |
| Cardiolog√≠a | $80.00 | 45 minutos |
| Dermatolog√≠a | $60.00 | 30 minutos |
| Pediatr√≠a | $55.00 | 30 minutos |
| Ginecolog√≠a | $70.00 | 40 minutos |
| Ortopedia | $75.00 | 45 minutos |
| Neurolog√≠a | $90.00 | 60 minutos |
| Oftalmolog√≠a | $65.00 | 30 minutos |

---

## üé® Configuraci√≥n de Colores

### Paleta de Colores Principal

```dart
Primary Color:    #1976D2  // Azul m√©dico
Secondary Color:  #42A5F5  // Azul claro
Accent Color:     #26A69A  // Verde agua
Error Color:      #E57373  // Rojo suave
Success Color:    #81C784  // Verde √©xito
Warning Color:    #FFB74D  // Naranja advertencia
```

### Botones de Acceso R√°pido

```dart
Invitado:  Purple (#9C27B0)
Usuario:   Green (#4CAF50)
Admin:     Orange (#FF9800)
```

---

## üì± Compatibilidad de Plataformas

| Plataforma | Versi√≥n M√≠nima | Estado |
|------------|----------------|--------|
| Android | API 21 (Android 5.0) | Soportado |
| iOS | iOS 11.0+ | Soportado |
| Web | Navegadores modernos | Soportado |
| Windows | Windows 10+ | Soportado |
| macOS | macOS 10.14+ | Soportado |
| Linux | Ubuntu 18.04+ | Soportado |

---

## üèóÔ∏è Arquitectura

### Patr√≥n de Dise√±o

El proyecto implementa una arquitectura modular basada en:

```
Presentaci√≥n (UI)
    ‚Üì
L√≥gica de Negocio (Services)
    ‚Üì
Acceso a Datos (Firebase)
```

### Flujo de Autenticaci√≥n

```
Usuario ‚Üí Login Page ‚Üí Firebase Auth ‚Üí Firestore ‚Üí Dashboard
                ‚Üì
          [Validaci√≥n]
                ‚Üì
           [UserModel]
```

---

## üìû Informaci√≥n Acad√©mica

### Detalles del Proyecto

| Campo | Informaci√≥n |
|-------|-------------|
| **Instituci√≥n** | Universidad [Nombre] |
| **Carrera** | Ingenier√≠a en Sistemas / Desarrollo de Software |
| **Materia** | Desarrollo de Aplicaciones M√≥viles |
| **Periodo** | Cuarto Cuatrimestre |
| **A√±o** | 2025 |
| **Profesor** | [Nombre del Profesor] |

### Objetivos de Aprendizaje

- Desarrollo de aplicaciones multiplataforma con Flutter
- Integraci√≥n de servicios backend en la nube (Firebase)
- Implementaci√≥n de autenticaci√≥n y autorizaci√≥n
- Dise√±o de bases de datos NoSQL (Firestore)
- Aplicaci√≥n de patrones de dise√±o y arquitectura limpia
- Gesti√≥n de estado en aplicaciones m√≥viles
- Desarrollo de interfaces de usuario responsivas

---

## üìû Contacto y Soporte

### Desarrollador

**Nombre:** [Tu Nombre]  
**Email:** [tu.email@universidad.edu]  
**GitHub:** [@TuUsuario](https://github.com/TuUsuario)

### Soporte del Proyecto

Para reportar bugs o solicitar features:
- [Issues](https://github.com/[TU_USUARIO]/sistema_citas_medicas/issues)
- [Discussions](https://github.com/[TU_USUARIO]/sistema_citas_medicas/discussions)

---

## üìÑ Licencia

Este proyecto es un trabajo acad√©mico desarrollado con fines educativos.

```
MIT License

Copyright (c) 2025 [Tu Nombre]

Se permite el uso, copia, modificaci√≥n y distribuci√≥n de este software
con fines acad√©micos y educativos.
```

---

## üôè Agradecimientos

- **Flutter Team** - Framework de desarrollo
- **Firebase Team** - Backend as a Service
- **Material Design** - Sistema de dise√±o
- **Comunidad de Flutter** - Recursos y documentaci√≥n
- **Universidad [Nombre]** - Apoyo acad√©mico

---

## üìä Informaci√≥n del Repositorio

**√öltima Actualizaci√≥n:** Octubre 2025  
**Versi√≥n:** 1.0.0  
**Estado:** En Desarrollo Activo  
**Tipo:** Proyecto Acad√©mico

---

**Desarrollado con Flutter para el Cuarto Cuatrimestre - 2025**
